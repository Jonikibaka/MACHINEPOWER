<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Предсказание Оценки</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="container">
    <h1>Втф киберпанк???</h1>

    <form id="predictForm">

        <div class="form-group">
            <label>Возраст:</label>
            <input type="number" name="age" required>
        </div>

        <div class="form-group">
            <label>Часы учёбы:</label>
            <input type="number" step="0.1" name="study_hours" required>
        </div>

        <div class="form-group">
            <label>Посещаемость (%):</label>
            <input type="number" name="attendance_percentage" required>
        </div>

        <hr class="divider">

        <h2>Оценки по предметам</h2>

        <div class="form-group">
            <label>Математика:</label>
            <input type="number" name="math_score" min="0" max="100" required>
        </div>

        <div class="form-group">
            <label>Физика/Наука:</label>
            <input type="number" name="science_score" min="0" max="100" required>
        </div>

        <div class="form-group">
            <label>Английский:</label>
            <input type="number" name="english_score" min="0" max="100" required>
        </div>

        <div class="form-group">
            <label>Общий балл:</label>
            <input type="number" name="overall_score" min="0" max="300" required>
        </div>

        <hr class="divider">

        <h2>Категориальные признаки</h2>

        <div class="form-group">
            <label>Тип школы:</label>
            <select name="school_type">
                <option value="public">Государственная</option>
                <option value="private">Частная</option>
            </select>
        </div>

        <div class="form-group">
            <label>Образование родителей:</label>
            <select name="parent_education">
                <option value="no_formal">Нет формального образования</option>
                <option value="high_school">Среднее образование</option>
                <option value="diploma">Диплом</option>
                <option value="graduate">Высшее образование</option>
                <option value="post_graduate">Аспирантура</option>
                <option value="phd">Докторантура</option>
            </select>
        </div>

        <div class="form-group">
            <label>Доп. активности:</label>
            <select name="extra_activities">
                <option value="no">Нет</option>
                <option value="yes">Да</option>
            </select>
        </div>

        <div class="form-group">
            <label>Метод обучения:</label>
            <select name="study_method">
                <option value="self">Самостоятельно</option>
                <option value="tutor">Репетитор</option>
                <option value="group">Групповые занятия</option>
                <option value="online">Онлайн-обучение</option>
                <option value="school">Школьные занятия</option>
                <option value="mixed">Смешанный метод</option>
            </select>
        </div>

        <button type="submit" class="cyber-btn">ПРЕДСКАЗАТЬ</button>
    </form>

</div>

<div id="modal" class="modal">
    <div class="modal-content">
        <h2>Результат</h2>
        <p id="resultText"></p>
        <button onclick="closeModal()" class="close-btn">Закрыть</button>
    </div>
</div>

<script>
document.getElementById("predictForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const data = Object.fromEntries(new FormData(e.target).entries());

    const response = await fetch("/predict", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
    });

    const result = await response.json();

    document.getElementById("resultText").innerText =
        "Предсказанная финальная оценка: " + result.predicted_grade;

    document.getElementById("modal").style.display = "flex";
});

function closeModal() {
    document.getElementById("modal").style.display = "none";
}
</script>

</body>
</html>
